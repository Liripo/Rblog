<!DOCTYPE html>
<html lang="Zh-cn">
<head>
    <meta charset="utf-8">
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://liripo.github.io/css/frameworks.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://liripo.github.io/css/github.css" />
    
    <link crossorigin="anonymous" media="(prefers-color-scheme: dark)" rel="stylesheet"
        href="https://liripo.github.io/css/dark.css" />
    
    <meta name="viewport" content="width=device-width">
    <meta name="description"
        content="准备工作：安装node.js,git,hexo,加上github账户即可。 hexo官方文档 什么是Github Page
 备注：以下前面为hexo在git for windows的配置安装，前三个标题推荐改为使用WSL&amp;gt;安装，linux子系统安装后可看这篇章的标题&amp;ndash;在WSL中手动安装node,hexo，之后再按照第三个标题相关配置往下进行。
" />
    <meta name="keywords"
        content="" />
    <meta name="robots" content="noodp" />
    <link rel="canonical" href="https://liripo.github.io/posts/2019/hexo-github%E6%90%AD%E5%BB%BAblog/" />

    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Hexo&#43;github搭建blog - Liripo" />
    <meta name="twitter:description"
        content="准备工作：安装node.js,git,hexo,加上github账户即可。 hexo官方文档 什么是Github Page
 备注：以下前面为hexo在git for windows的配置安装，前三个标题推荐改为使用WSL&amp;gt;安装，linux子系统安装后可看这篇章的标题&amp;ndash;在WSL中手动安装node,hexo，之后再按照第三个标题相关配置往下进行。
" />
    <meta name="twitter:site" content="https://liripo.github.io" />
    <meta name="twitter:creator" content="" />
    <meta name="twitter:image"
        content="https://liripo.github.io">

    
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Hexo&#43;github搭建blog - Liripo">
    <meta property="og:description"
        content="准备工作：安装node.js,git,hexo,加上github账户即可。 hexo官方文档 什么是Github Page
 备注：以下前面为hexo在git for windows的配置安装，前三个标题推荐改为使用WSL&amp;gt;安装，linux子系统安装后可看这篇章的标题&amp;ndash;在WSL中手动安装node,hexo，之后再按照第三个标题相关配置往下进行。
" />
    <meta property="og:url" content="https://liripo.github.io/posts/2019/hexo-github%E6%90%AD%E5%BB%BAblog/" />
    <meta property="og:site_name" content="Hexo&#43;github搭建blog" />
    <meta property="og:image"
        content="https://liripo.github.io">
    <meta property="og:image:width" content="2048">
    <meta property="og:image:height" content="1024">
    
    <meta property="article:published_time" content="2019-11-02 13:28:06 &#43;0000 UTC" />
    

    
    

    
    

    <title>Hexo&#43;github搭建blog - Liripo</title>

    <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://liripo.github.io/images/favicon.ico">
    <meta name="theme-color" content="#1e2327">

    
    
    
    
</head>

<body class="env-production emoji-size-boost page-responsive page-profile">
  <div class="position-relative js-header-wrapper ">
    <span class="Progress progress-pjax-loader position-fixed width-full js-pjax-loader-bar">
        <span class="progress-pjax-loader-bar top-0 left-0" style="width: 0%;"></span>
    </span>
    <header class="Header py-lg-0 js-details-container Details flex-wrap flex-lg-nowrap p-responsive" role="banner">
        <div class="Header-item d-none d-lg-flex">
            <a class="Header-link" href="https://liripo.github.io" aria-label="Homepage"
                data-ga-click="Header, go to dashboard, icon:logo">
                <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
                    width="32" aria-hidden="true">
                    <path fill-rule="evenodd"
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
                </svg>
            </a>
        </div>
        <div
            class="Header-item Header-item--full flex-column flex-lg-row width-full flex-order-2 flex-lg-order-none mr-0 mr-lg-3 mt-3 mt-lg-0 Details-content--hidden">
            <div class="header-search flex-self-stretch flex-lg-self-auto mr-0 mr-lg-3 mb-3 mb-lg-0 scoped-search site-scoped-search js-site-search position-relative js-jump-to"
                role="combobox" aria-owns="jump-to-results" aria-label="Search or jump to" aria-haspopup="listbox"
                aria-expanded="false">
                <div class="position-relative">
                </div>
            </div>
        </div>
        <nav class="d-flex" aria-label="Global">
            <a class="js-selected-navigation-item Header-link py-lg-3">&nbsp;</a>
        </nav>
        <div class="Header-item Header-item--full flex-justify-center d-lg-none position-relative" style="margin-right: auto;">
            <a class="Header-link" href="https://liripo.github.io" aria-label="Homepage"
                data-ga-click="Header, go to dashboard, icon:logo">
                <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
                    width="32" aria-hidden="true">
                    <path fill-rule="evenodd"
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
                </svg>
            </a>
        </div>
        <div class="Header-item position-relative mr-0 d-none d-lg-flex">
            <details class="details-overlay details-reset">
                <summary class="Header-link" aria-label="View profile and more"
                    data-ga-click="Header, show menu, icon:avatar">
                    
                    <img alt="" class="avatar" src="https://liripo.github.io/image/caomao.jpg" height="20" width="20">
                    
                </summary>
            </details>
        </div>
    </header>
</div>

<div id="start-of-content" class="show-on-focus"></div>
<div id="js-flash-container">
</div>

  
<div class="application-main " data-commit-hovercards-enabled="">
    <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode" class="">
        <main>
            <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav pt-0 pt-lg-4 ">
                <div class="repohead-details-container clearfix container-lg p-responsive d-none d-lg-block">
                    <div class="mb-3 d-flex">
                        <h1 class="public css-truncate float-none flex-auto width-fit pl-0">
                            <a class="avatar mr-1" href="https://liripo.github.io/about/">
                                

                                <img src="https://liripo.github.io/image/caomao.jpg" width="26" height="26">
                                
                            </a>
                            <span class="author"><a href="https://liripo.github.io">Liripo</a></span>
                            <span class="path-divider">/</span>
                            <strong itemprop="name" class="css-truncate-target" style="max-width: 410px"><a
                                    href="https://liripo.github.io/posts/2019/hexo-github%E6%90%AD%E5%BB%BAblog/">Hexo&#43;github搭建blog</a></strong>

                            <div class="d-block text-small text-gray">
                                Created <time-ago datetime="2019-11-02" class="no-wrap"
                                    title="Created at 2019/11/02">
                                    2019-11-02</time-ago>
                                <span class="file-info-divider"></span>
                                Modified <time-ago datetime="2019-11-02" class="no-wrap"
                                    title="Modified  at 2019/11/02">
                                    2019-11-02</time-ago>
                            </div>
                        </h1>
                    </div>
                </div>




            </div>
            <div class="container-lg clearfix new-discussion-timeline experiment-repo-nav  p-responsive">
                <div class="repository-content ">
                    <div class="Box mt-3 position-relative">
                        <div class="Box-header py-2 d-flex flex-column flex-shrink-0 flex-md-row flex-md-items-center">
                            <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                                4095 Words
                                
                            </div>
                        </div>

                        <div id="readme" class="Box-body readme blob instapaper_body js-code-block-container">
                            <article class="markdown-body entry-content p-3 p-md-6" itemprop="text"><p>准备工作：安装node.js,git,hexo,加上github账户即可。
<a href="https://hexo.io/zh-cn/docs/">hexo官方文档</a>
<a href="https://help.github.com/en/github/working-with-github-pages/about-github-pages">什么是Github Page</a></p>
<blockquote>
<p>备注：以下前面为hexo在git for windows的配置安装，前三个标题推荐改为使用WSL&gt;安装，<a href="https://liripo.github.io/2020/03/21/windows10%E5%AE%89%E8%A3%85linux/#more">linux子系统安装</a>后可看这篇章的标题&ndash;在WSL中手动安装node,hexo，之后再按照第三个标题相关配置往下进行。</p>
</blockquote>
<p>[toc]</p>
<h3 id="nodejs-安装">node.js 安装</h3>
<p>node下载<a href="https://nodejs.org/en/download/">链接</a>,按需安装即可。</p>
<h3 id="git下载链接httpsgit-scmcomdownloadwin若是官网下载网速不行可mail-to-me传百度云链接">git下载<a href="https://git-scm.com/download/win">链接</a>，若是官网下载网速不行，可mail to me,传百度云链接。</h3>
<p>安装完成后，可以在菜单栏看到<em>Git GUI Here</em> 和 <em>Git Bash Here</em>两个选项。打开gitbash输入命令行，有版本信息即可。</p>
<pre><code>git --version  
node -v  
npm -v
</code></pre><h3 id="安装hexo">安装hexo</h3>
<p>在gitbash中，命令行使用与linux相似，可选择一个磁盘，新建一个目录，如（/d/github.io）,cd 到该文件夹下使用npm命令。</p>
<pre><code>npm install hexo-cli -g #安装hexo  
npm install hexo-deployer-git --save  #表示安装 hexo 部署到 git page 的 deployer
</code></pre><p>初始化一个blog,可使用<code>hexo init</code>直接在当前目录初始化，亦可<code>hexo init blog</code>这样新建一个文件夹。
本地查看效果,cd 到初始化的文件夹下，执行以下命令，登录<a href="http://localhost:4000/">http://localhost:4000/</a></p>
<pre><code>hexo g
hexo s
</code></pre><p>假如4000的端口被占用，可使用<code>hexo g -p 4001</code>,<code>hexo s</code> 后访问相应端口即可。
gitbash最后会显示如下信息说明操作成功。</p>
<pre><code>INFO Hexo is running at http://0.0.0.0:4000/. Press Ctrl+C to stop.
</code></pre><h3 id="将博客n部署到github-page">将博客n部署到github page</h3>
<p>到目前为止，我们的本地博客就成功搭建了，但是现在我们只能通过本地连接查看博客，我们要做的是让其他人也能够访问我们的博客，这就需要我们将博客部署到Github Pages上。
<a href="https://github.com/">github</a>sign up 注册账户。
点击<em>New repository</em>开始创建，步骤及注意事项见下图点击 New repository 开始创建，如下图。
<img src="https://user-images.githubusercontent.com/54770415/68066934-a6ee8e00-fd7a-11e9-8aa9-d1f5c3196e82.png" alt="i">
之后创建一个仓库名如(Liripo.git.io)，我的github账户名为Liripo。</p>
<h3 id="配置ssh密钥">配置ssh密钥</h3>
<p>只有配置好 SSH 密钥后，我们才可以通过 git 操作实现本地代码库与 Github 代码库同步，新建文件夹（如mkdir ~/.ssh）,cd ~/.ssh, Git Bash 输入以下命令：</p>
<pre><code>ssh-keygen -t rsa -C &quot;your email@example.com&quot; 
//引号里面填写github的注册邮箱，比如我的是liripo@qq.com
</code></pre><p>接着出现</p>
<pre><code>Generating public/private rsa key pair.  
Enter file in which to save the key (/c/Users/you/.ssh/id_rsa):  
//到这里可以直接回车将密钥按默认文件进行存储
</code></pre><p>然后</p>
<pre><code> Enter passphrase (empty for no passphrase):  
//这里是要你输入密码，其实不需要输什么密码，直接回车就行 
Enter same passphrase again:  
</code></pre><p>最终屏幕显示如下信息：</p>
<pre><code>Your identification has been saved in /c/Users/you/.ssh/id_rsa.  
Your public key has been saved in /c/Users/you/.ssh/id_rsa.pub.  
The key fingerprint is:  
这里是各种字母数字组成的字符串，结尾是你的邮箱  
The key's randomart image is: 
这里也是各种字母数字符号组成的字符串
</code></pre><p>运行命令<code> $ clip &lt; ~/.ssh/id_rsa.pub</code>，将公钥的内容复制到系统粘贴板上;或者less查看并复制 ~/.ssh/id_rsa.pub</p>
<h3 id="在github上添加你的公钥">在GitHub上添加你的公钥</h3>
<p>① 登陆 GitHub，进入 Settings；
② 点击 SSH and GPG Keys；
③ 选择 New SSH key；
④ 粘贴密钥；#备注：tittle随意填。
输入以下命令：注意：git@github.com不要做任何更改！</p>
<pre><code>ssh -T git@github.com
</code></pre><p>之后显示的内容，输入yes即可。
出现successfully字样即是成功，不必管其他的。</p>
<h3 id="配置git个人信息">配置git个人信息</h3>
<p>Git 会根据用户的名字和邮箱来记录提交，GitHub 也是用这些信息来做权限的处理，输入以下命令进行个人信息的设置，把名称和邮箱替换成你自己的，名字可以不是 GitHub 的昵称，但为了方便记忆，建议与 GitHub 一致。</p>
<pre><code>git config --global user.name &quot;此处填你的用户名&quot;  
git config --global user.email  &quot;此处填你的邮箱&quot;
</code></pre><p>到此为止 SSH Key 配置成功，本机已成功连接到 Github。</p>
<h3 id="将本地的-hexo-文件更新到-github-的库中">将本地的 Hexo 文件更新到 Github 的库中</h3>
<p>cd 到刚刚hexo 初始化的目录下，配置*_config.yml*这个文件
github可以使用vim 编辑其，输入<code>vim _config.yml</code>,使用shift +g 快捷键到行尾，找到deploy字样。</p>
<pre><code># Deployment
## Docs: https://hexo.io/docs/deployment.html
deploy:
  type: git
    repo: git@github.com:Liripo/Liripo.github.io
	  branch: master
</code></pre><p>repo处的Liripo修改成d你的用户n名即可。</p>
<h3 id="将本地修改的blog部署到github上">将本地修改的blog部署到GitHub上</h3>
<p>第一次部署，输入命令安装deployer</p>
<pre><code>npm install hexo-deployer-git --save
</code></pre><p>之后使用</p>
<pre><code>hexo d -g
</code></pre><p>即是部署到github上，可以到https://github.com/Liripo/Liripo.github.io（Liripo修改成你的账户）查看更新状态，亦可以到http://liripo.io上查看你的博客。
但是这样你的博客也没有那么快响应，可以将步骤拆分开来</p>
<pre><code>hexo g #生成静态页面
hexo s #本地查看
hexo d #部署上去
</code></pre><p>新建文章可以使用如<code>hexo n &quot;hallo world&quot;</code>的命令快速在source/<em>_posts</em>下生成一个halloworld.md的文件，你可以使用vim编辑这个文件，这个文件使用markdown语法书写。
当然，markdown语法也可以使用如Typora支持markdown的编辑器，之后将写的文件以.md保存在your/path/to/blog_source/<em>_posts</em>里面即可。
还有一点值得注意，</p>
<pre><code>hexo g&amp;&amp;hexo s&amp;&amp;hexo d
</code></pre><p>需要在你初始化的那个目录下使用。</p>
<h3 id="博客备份">博客备份</h3>
<p>使用hexo-git-backup 插件备份
Hexo 版本是 3.x.x，则使用以下命令安装：<code>npm install hexo-git-backup --save</code>
这里不在github.io下新建分支，而是新建了一个储存库hexo
到 Hexo 博客根目录的 _config.yml 配置文件里添加以下配置：</p>
<pre><code>backup:
  type: git
  theme: next
  message: Backup blog
  repository:
    github: git@github.com:Liripo/hexo.git,master
    coding: git@git.dev.tencent.com:Liripo/hexo.git,master
</code></pre><p>-theme：你要备份的主题名称
-message：自定义提交信息
-repository：仓库名，注意仓库地址后面要添加一个分支名，比如我就创建了一个 backup 分支
到此即可使用命令<code>hexo backup</code>或者<code>hexo b</code>备份博客了。</p>
<h3 id="hexo及next主题优化">hexo及next主题优化</h3>
<p>这里便不多作介绍了，<a href="https://io-oi.me/tech/hexo-next-optimization/">参考网址</a></p>
<h3 id="hexo文章加密">hexo文章加密</h3>
<p>使用插件hexo-blog-encrypt即可，可在<a href="https://hexo.io/plugins/">hexo插件中心</a>或者<a href="https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md">github上的源代码</a>获得。
安装可使用npm安装<code>npm install --save hexo-blog-encrypt</code>
在站点配置文件启用插件<code>_config.yml</code>，随意找个位置即可：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">encrypt:
    enable: true
	abstract: 这是一篇加密文章，想查看的话请发我邮箱联系。
  	message: password
</code></pre></div><p>需要加密的文章加入&quot;password&quot;字段即可</p>
<pre><code>---
title: Hello World
date: 2016-03-30 21:18:02
password: hello world
---
</code></pre><p>高级设置可以看github上的Readme。</p>
<h3 id="picgogithub构建markdown图床">picgo+github构建markdown图床</h3>
<p>建立一个Github仓库后在setting里生成一个token,如我的为<code>a9717fe783682d0ddb3354f23ecc4aacbc2d9cf0</code>
下载<a href="https://github.com/Molunerfinn/PicGo">picgo</a>
配置,如图所示即可，注意/Liripo/blogphoto记得更换：
<img src="https://raw.githubusercontent.com/Liripo/blogphoto/master/img/20191210223112.png" alt=""></p>
<p>不过图片显示不稳定，本人换成了腾讯云cos。</p>
<h3 id="我的博客环境">我的博客环境</h3>
<p><code>hexo --version</code></p>
<pre><code>hexo: 4.0.0
hexo-cli: 3.1.0
os: Windows_NT 10.0.17763 win32 x64
node: 12.13.0
v8: 7.7.299.13-node.12
uv: 1.32.0
zlib: 1.2.11
brotli: 1.0.7
ares: 1.15.0
modules: 72
nghttp2: 1.39.2
napi: 5
llhttp: 1.1.4
http_parser: 2.8.0
openssl: 1.1.1d
cldr: 35.1
icu: 64.2
tz: 2019a
unicode: 12.1
</code></pre><p>查看依赖包,cat  hexo 目录下的 package.json 文件<code>cat package.json</code></p>
<pre><code>{
  &quot;name&quot;: &quot;hexo-site&quot;,
  &quot;version&quot;: &quot;0.0.0&quot;,
  &quot;private&quot;: true,
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;hexo generate&quot;,
    &quot;clean&quot;: &quot;hexo clean&quot;,
    &quot;deploy&quot;: &quot;hexo deploy&quot;,
    &quot;server&quot;: &quot;hexo server&quot;
  },
  &quot;hexo&quot;: {
    &quot;version&quot;: &quot;4.0.0&quot;
  },
  &quot;dependencies&quot;: {
    &quot;hexo&quot;: &quot;^4.0.0&quot;,
    &quot;hexo-asset-image&quot;: &quot;git+https://github.com/CodeFalling/hexo-asset-image.git&quot;,
    &quot;hexo-blog-encrypt&quot;: &quot;^3.0.6&quot;,
    &quot;hexo-deployer-git&quot;: &quot;^2.0.0&quot;,
    &quot;hexo-generator-archive&quot;: &quot;^1.0.0&quot;,
    &quot;hexo-generator-category&quot;: &quot;^1.0.0&quot;,
    &quot;hexo-generator-index&quot;: &quot;^1.0.0&quot;,
    &quot;hexo-generator-searchdb&quot;: &quot;^1.1.0&quot;,
    &quot;hexo-generator-tag&quot;: &quot;^1.0.0&quot;,
    &quot;hexo-git-backup&quot;: &quot;^0.1.3&quot;,
    &quot;hexo-renderer-ejs&quot;: &quot;^1.0.0&quot;,
    &quot;hexo-renderer-marked&quot;: &quot;^2.0.0&quot;,
    &quot;hexo-renderer-stylus&quot;: &quot;^1.1.0&quot;,
    &quot;hexo-server&quot;: &quot;^1.0.0&quot;,
    &quot;hexo-toc&quot;: &quot;^1.1.0&quot;,
    &quot;hexo-wordcount&quot;: &quot;^6.0.1&quot;
  }
}
</code></pre><h3 id="更新">更新</h3>
<h4 id="npm更新包">npm更新包</h4>
<ul>
<li>npm 更新全局安装的包：
<code>npm update -g</code>
-npm 更新站点文件夹根目录下安装的依赖包：
<code>cd ~/blog</code>   <code>npm update</code></li>
<li>更新 npm ：
<code>npm install npm -g</code></li>
<li>更新 Node.js 到最新版：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install n -g
n latest
</code></pre></div><h4 id="更新主题">更新主题</h4>
<p>改动不大没必要更新，更新有风险，需谨慎
<code>cd ~/blog/themes/next/</code></p>
<ul>
<li>直接<code>git pull</code>一般会失败，这是因为改过了本地配置</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#先将本地的所有修改先暂时存储起来</span>
git stash
<span style="color:#75715e">#拉取最新数据，之所以可以拉取是因为有.git文件</span>
git pull
<span style="color:#75715e">#接下来还原暂时存储的内容</span>
git stash pop
</code></pre></div><p>上面失败的话是因为Git 无法确定一些改动，这时可以选择手动修改，很麻烦但是推荐使用
或者直接放弃本地修改并更新</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git reset --hard
git pull
</code></pre></div><h3 id="使用-gulp-压缩-hexo-静态资源">使用 gulp 压缩 hexo 静态资源</h3>
<p><a href="https://www.npmjs.com/package/gulp">官方文档</a>
查看网页源代码发现有大量留白。利用 gulp压缩。首先任意目录全局安装：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install gulp-cli -g
</code></pre></div><p>然后到站点文件夹根目录,<code>cd ~/blog</code>【省去配置环境变量的麻烦】：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install gulp-clean-css gulp-uglify gulp-htmlmin gulp-imagemin gulp-htmlclean gulp --save
</code></pre></div><p>在博客根目录下创建一个名为 gulpfile.js 的文件</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// 文件位置：~/blog/gulpfile.js
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gulp</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;gulp&#39;</span>);
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">minifycss</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;gulp-minify-css&#39;</span>);
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">htmlmin</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;gulp-htmlmin&#39;</span>);
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">htmlclean</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;gulp-htmlclean&#39;</span>);
<span style="color:#a6e22e">gulp</span>.<span style="color:#a6e22e">task</span>(<span style="color:#e6db74">&#39;minify-css&#39;</span>, <span style="color:#66d9ef">function</span>() {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">gulp</span>.<span style="color:#a6e22e">src</span>(<span style="color:#e6db74">&#39;./public/**/*.css&#39;</span>)
        .<span style="color:#a6e22e">pipe</span>(<span style="color:#a6e22e">minifycss</span>())
        .<span style="color:#a6e22e">pipe</span>(<span style="color:#a6e22e">gulp</span>.<span style="color:#a6e22e">dest</span>(<span style="color:#e6db74">&#39;./public&#39;</span>))
});
<span style="color:#a6e22e">gulp</span>.<span style="color:#a6e22e">task</span>(<span style="color:#e6db74">&#39;minify-html&#39;</span>, <span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">gulp</span>.<span style="color:#a6e22e">src</span>(<span style="color:#e6db74">&#39;./public/**/*.html&#39;</span>)
    .<span style="color:#a6e22e">pipe</span>(<span style="color:#a6e22e">htmlclean</span>())
    .<span style="color:#a6e22e">pipe</span>(<span style="color:#a6e22e">htmlmin</span>({
         <span style="color:#a6e22e">removeComments</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
         <span style="color:#a6e22e">minifyJS</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
         <span style="color:#a6e22e">minifyCSS</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
         <span style="color:#a6e22e">minifyURLs</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
    }))
    .<span style="color:#a6e22e">pipe</span>(<span style="color:#a6e22e">gulp</span>.<span style="color:#a6e22e">dest</span>(<span style="color:#e6db74">&#39;./public&#39;</span>))
});
<span style="color:#a6e22e">gulp</span>.<span style="color:#a6e22e">task</span>(<span style="color:#e6db74">&#39;default&#39;</span>, [<span style="color:#e6db74">&#39;minify-html&#39;</span>, <span style="color:#e6db74">&#39;minify-css&#39;</span>]);
</code></pre></div><p>部署到Github Page</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">hexo clean <span style="color:#f92672">&amp;&amp;</span> hexo g <span style="color:#f92672">&amp;&amp;</span> gulp <span style="color:#f92672">&amp;&amp;</span> hexo d
</code></pre></div><p>最后，图方便直接git clone 别人的博客备份，再稍微修改，删掉别人的文章就好喽！【不过你要知道别人的依赖环境才行】</p>
<h3 id="脚注添加">脚注添加</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install hexo-reference --save
</code></pre></div><p>在站点配置文件添加</p>
<pre><code>plugins:
  hexo-reference
</code></pre><h3 id="文章加密">文章加密</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install hexo-blog-encrypt
</code></pre></div><p>在站点配置文件添加</p>
<pre><code> encrypt:
   enable: true
#   abstract: 此文已加密，如若需要观看，请邮件联系。
#   message: password
</code></pre><h3 id="移除某插件">移除某插件</h3>
<pre><code>npm un &lt;插件&gt; --save
</code></pre><h3 id="修改链接样式">修改链接样式</h3>
<p><code>cd themes/next/source/css/_common/components/post &amp;&amp; vim post.styl</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">/*修改文章内链接文本样式*/</span>
 .<span style="color:#a6e22e">post</span><span style="color:#f92672">-</span><span style="color:#a6e22e">body</span> <span style="color:#a6e22e">p</span> <span style="color:#a6e22e">a</span>{
   <span style="color:#a6e22e">color</span><span style="color:#f92672">:</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0593</span><span style="color:#a6e22e">d3</span>;
   <span style="color:#a6e22e">border</span><span style="color:#f92672">-</span><span style="color:#a6e22e">bottom</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">none</span>;

   <span style="color:#f92672">&amp;:</span><span style="color:#a6e22e">hover</span> {
     <span style="color:#a6e22e">color</span><span style="color:#f92672">:</span> <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">0477</span><span style="color:#a6e22e">ab</span>;
     <span style="color:#a6e22e">text</span><span style="color:#f92672">-</span><span style="color:#a6e22e">decoration</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">underline</span>;
   }
 }
</code></pre></div><h3 id="添加-readmemd-文件">添加 README.md 文件</h3>
<p>每个项目下一般都有一个 README.md 文件，但是使用 hexo 部署到仓库后，项目下是没有 README.md 文件的。在 Hexo 目录下的 source 根目录下添加一个 README.md 文件，修改站点配置文件\ _config.yml，将 skip_render 参数的值设置为</p>
<pre><code>skip\_render: README.md
</code></pre><h3 id="添加daovoice在线聊天">添加Daovoice在线聊天</h3>
<p>注册地址<a href="http://www.daovoice.io/">http://www.daovoice.io/</a>
使用我的邀请码进行注册：05043655
复制粘贴代码
修改的hexo的文件路劲如下: <code>博客/themes/next/layout/_partials/head/head.swig</code>末尾添加下面的代码:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
{<span style="color:#f92672">%</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">daovoice</span> <span style="color:#f92672">%</span>}
 <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span><span style="color:#f92672">&gt;</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">i</span>,<span style="color:#a6e22e">s</span>,<span style="color:#a6e22e">o</span>,<span style="color:#a6e22e">g</span>,<span style="color:#a6e22e">r</span>,<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">m</span>){<span style="color:#a6e22e">i</span>[<span style="color:#e6db74">&#34;DaoVoiceObject&#34;</span>]<span style="color:#f92672">=</span><span style="color:#a6e22e">r</span>;<span style="color:#a6e22e">i</span>[<span style="color:#a6e22e">r</span>]<span style="color:#f92672">=</span><span style="color:#a6e22e">i</span>[<span style="color:#a6e22e">r</span>]<span style="color:#f92672">||</span><span style="color:#66d9ef">function</span>(){(<span style="color:#a6e22e">i</span>[<span style="color:#a6e22e">r</span>].<span style="color:#a6e22e">q</span><span style="color:#f92672">=</span><span style="color:#a6e22e">i</span>[<span style="color:#a6e22e">r</span>].<span style="color:#a6e22e">q</span><span style="color:#f92672">||</span>[]).<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">arguments</span>)},<span style="color:#a6e22e">i</span>[<span style="color:#a6e22e">r</span>].<span style="color:#a6e22e">l</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">*</span><span style="color:#66d9ef">new</span> Date();<span style="color:#a6e22e">a</span><span style="color:#f92672">=</span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">createElement</span>(<span style="color:#a6e22e">o</span>),<span style="color:#a6e22e">m</span><span style="color:#f92672">=</span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">getElementsByTagName</span>(<span style="color:#a6e22e">o</span>)[<span style="color:#ae81ff">0</span>];<span style="color:#a6e22e">a</span>.<span style="color:#66d9ef">async</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#a6e22e">g</span>;<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;utf-8&#34;</span>;<span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">parentNode</span>.<span style="color:#a6e22e">insertBefore</span>(<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">m</span>)})(window,document,<span style="color:#e6db74">&#34;script&#34;</span>,(<span style="color:#e6db74">&#39;https:&#39;</span> <span style="color:#f92672">==</span> document.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">protocol</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;https:&#39;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;http:&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;//widget.daovoice.io/widget/b6dbddb6.js&#34;</span>,<span style="color:#e6db74">&#34;daovoice&#34;</span>)
 <span style="color:#a6e22e">daovoice</span>(<span style="color:#e6db74">&#39;init&#39;</span>, {
  <span style="color:#a6e22e">app_id</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;用户ID&#34;</span>
});
<span style="color:#a6e22e">daovoice</span>(<span style="color:#e6db74">&#39;update&#39;</span>);
 <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span>
{<span style="color:#f92672">%</span> <span style="color:#a6e22e">endif</span> <span style="color:#f92672">%</span>}
</code></pre></div><p>其中用户ID可以在Daovoice注册好页面的应用设置中找到。<code>app_id</code>关键字之后
在Next主题的配置文件博客<code>/themes/next/_config.yml</code>末尾中添加用户ID:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">daovoice: true
daovoice_app_id: 用户ID
</code></pre></div><blockquote>
<p>不大好用，加载页面不顺利</p>
</blockquote>
<h3 id="添加hexo-neat压缩htmljscss">添加hexo-neat压缩html,js,css</h3>
<p>首先<code>npm install hexo-neat --save</code>
在站点配置文件中添加</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#75715e"># hexo-neat</span>
<span style="color:#75715e"># 博文压缩</span>
<span style="color:#f92672">neat_enable</span>: <span style="color:#66d9ef">true</span>
<span style="color:#75715e"># 压缩html</span>
<span style="color:#f92672">neat_html</span>:
  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#f92672">exclude</span>:
<span style="color:#75715e"># 压缩css</span>
<span style="color:#f92672">neat_css</span>:
  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#f92672">exclude</span>:
    - <span style="color:#e6db74">&#39;**/*.min.css&#39;</span>
<span style="color:#75715e"># 压缩js</span>
<span style="color:#f92672">neat_js</span>:
  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#f92672">mangle</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#f92672">output</span>:
  <span style="color:#f92672">compress</span>:
  <span style="color:#f92672">exclude</span>:
    - <span style="color:#e6db74">&#39;**/*.js&#39;</span>
</code></pre></div><h3 id="npm管理">npm管理</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#查看下载的包的路径，即npm install的包</span>
npm config get prefix
</code></pre></div><h3 id="在wsl中手动安装nodehexo">在WSL中手动安装node,hexo</h3>
<p>在<a href="https://nodejs.org/dist/">node网址</a>寻找最新版本linux的二进制版本，以.xz结尾，如我使用以下命令安装了我的版本</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wget https://nodejs.org/dist/latest/node-v13.12.0-linux-x64.tar.xz
</code></pre></div><p>解压即可<code>tar xvf node-v13.12.0-linux-x64.tar.xz</code></p>
<p>配置相关环境变量到~/.bashrc,运行<code>node -v </code> <code>npm -v</code>看看是否有版本信息，之后<code>npm install hexo-cli g</code>安装hexo,安装路径应在node安装目录同个目录下的node_model目录下，找到hexo-cli目录，进入可以看到bin下有hexo运行程序，加入到环境变量即可，或者软连接到/usr/local/bin之类的。</p>
<h3 id="官方教程">官方教程</h3>
<p><a href="https://theme-next.org/docs/getting-started/data-files">官方教程</a></p></article>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<div class="utterances"></div>

<script>
    var systemThemeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    var systemTheme = systemThemeMediaQuery.matches ? 'dark' : 'light';
    var utterancesTheme = systemTheme === 'dark' ? 'github-dark' : 'github-light';
    var utterancesScript = document.createElement('script');
    utterancesScript.src = 'https://utteranc.es/client.js';
    utterancesScript.setAttribute('repo', 'liripo\/liripo.github.io');
    utterancesScript.setAttribute('issue-term', 'title');
    utterancesScript.setAttribute('theme', utterancesTheme);
    utterancesScript.setAttribute('crossorigin', 'anonymous');
    utterancesScript.setAttribute('async', '');
    document.querySelector('.utterances').appendChild(utterancesScript);
</script>
<noscript>Please enable JavaScript to view the comments</noscript>


  <div class="footer container-lg width-full p-responsive" role="contentinfo">
    <div
        class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
        <ul
            class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
            <li class="mr-3 mr-lg-0">Liripo</a></li>
        </ul>

        <a aria-label="Homepage" title="Liripo" class="footer-octicon d-none d-lg-block mx-lg-4"
            href="https://liripo.github.io">
            <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                </path>
            </svg>
        </a>
        <ul
            class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
        </ul>
    </div>
    <div class="d-flex flex-justify-center pb-6">
        <span class="f6 text-gray-light"></span>
    </div>
</div>

<script crossorigin="anonymous"
    type="application/javascript" src="https://liripo.github.io/js/frameworks.js"></script>

<script crossorigin="anonymous"
    type="application/javascript" src="https://liripo.github.io/js/github-bootstrap.js"></script>
<script src="https://liripo.github.io/js/stop.js"></script>
<script src="https://liripo.github.io/js/contributions.js"></script>

</body>

</html>